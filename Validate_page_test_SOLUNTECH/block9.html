<script src="https://code.jquery.com/jquery-3.6.3.min.js"
    integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
<script>
    function isValidPhoneNumber(phoneNumber) {
        //const phonePattern = /^(\+?\d{1,3}[-.\s]?)?\(?(\d{3})\)?[-.\s]?(\d{3})[-.\s]?(\d{4})$/;
        const phonePattern = /^\d{10}$/;
        return phonePattern.test(phoneNumber);
    }
    function isValidDate(dateString) {
        const datePattern = /^(0[1-9]|1[0-2])\/(0[1-9]|[12]\d|3[01])\/\d{4}$/;
        return datePattern.test(dateString);
    }
    if ($('#caspioform .cbFormCommonError').length == 0){
        $('.lastNameError').hide();
        $('#dateError').hide();
        $('#formatDateError').hide();
        $('#cellphoneError').hide();
        $('#formatCellphoneError').hide();
    }

    //$("div[class^='cbFormFieldCell cbFormBlock18_']").hide();
    //$("div[class^='cbFormFieldCell cbFormBlock19_']").hide();

    $('.cbSubmitButtonContainer').hide();

    //$('#tableCont1').children().eq(1).hide();
    //$('#tableCont2').children().eq(1).hide();
    $('.cbFormFieldSet span.cbFormData').hide();
    /*if ($('input[name=send]:checked', '.emailAndSms').val() === '1') {
        $('input[value=Email]', '.cbFormData').click();
    } else {
        $('input[value=SMS]', '.cbFormData').click();
    }
    $('.emailAndSms').on('change', function (event) {
        const messageSw = $('input[name=send]:checked', '.emailAndSms').val();
        if (messageSw === '1') {
            $('input[value=Email]', '.cbFormData').click();
            $('#InsertRecordEmail').val('');
            $('#InsertRecordCellPhone').val('');
        } else {
            $('input[value=SMS]', '.cbFormData').click();
            $('#InsertRecordEmail').val('');
            $('#InsertRecordCellPhone').val('');
        }
    });*/

    $('#continueButton').click(function (event) {
        $('.lastNameError').hide();
        $('#dateError').hide();
        $('#formatDateError').hide();
        $('#cellphoneError').hide();
        $('#formatCellphoneError').hide();
        let sw = false;
        if ($('#InsertRecordLastName').val() === '') {
            $('.lastNameError').show();
            sw = true;
        }
        if ($('#InsertRecordDOB').val() === '') {
            $('#dateError').show();
            sw = true;
        } else if (!isValidDate($('#InsertRecordDOB').val())) {
            $('#formatDateError').show();
            sw = true;
        }
        if ($('#InsertRecordCellPhone').val() === '') {
            $('#cellphoneError').show();
            sw = true;
        } else if (!isValidPhoneNumber($('#InsertRecordCellPhone').val())) {
            $('#formatCellphoneError').show();
            sw = true;
        }
        /*const messageSw = $('input[name=send]:checked', '.emailAndSms').val();
        if (messageSw === '1' && $('#InsertRecordEmail').val() == '') {
                $('.emailError').show();
                sw = true;
        }else if (messageSw === '2' && $('#InsertRecordCellPhone').val() == '') {
            $('.cellphoneError').show();
            sw = true;
        }
        if (!sw) {
            if (messageSw === '1' && $("input[id^='cbParamVirtual2_']").val() == '') {
                alert('User does not exist');
                sw = true;
            }else if (messageSw === '2' && $("input[id^='cbParamVirtual3_']").val() == '') {
                alert('User does not exist');
                sw = true;
            }
        }*/
        if (!sw) {
            if ($("input[id^='cbParamVirtual4_']").val() == '0') {
                alert('There is no existing record with the information provided. Please, register first to continue with the treatment process');
                location.href ="https://dev2.helixvm.com/register-3/";
            }else {
                $('.cbSubmitButton').click();
            }
        }
    });
</script>